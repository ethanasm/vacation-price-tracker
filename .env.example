# =============================================================================
# VACATION PRICE TRACKER - Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your values
#
# PHASE 1 MINIMUM REQUIRED VARIABLES:
# -----------------------------------
# The following variables MUST be configured for Phase 1 to work:
#   - DATABASE_URL (pre-configured for Docker Compose)
#   - REDIS_URL (pre-configured for Docker Compose)
#   - GOOGLE_CLIENT_ID / GOOGLE_CLIENT_SECRET (from Google Cloud Console)
#   - SECRET_KEY (generate with: openssl rand -hex 32)
#   - AMADEUS_API_KEY / AMADEUS_API_SECRET (from developers.amadeus.com)
#
# Quick start:
#   1. cp .env.example .env
#   2. Generate SECRET_KEY: openssl rand -hex 32
#   3. Set up Google OAuth credentials
#   4. Set up Amadeus API credentials
#   5. Run: ./scripts/dev.sh

# --- CORE APP CONFIG ---
PROJECT_NAME="Vacation Price Tracker"
ENVIRONMENT=development  # development | production
FRONTEND_URL=https://localhost:3000
BACKEND_URL=https://localhost:8000
# Comma-separated list of allowed origins for CORS.
# In production, set this to your single Vercel domain (or custom domain) only.
# Example: CORS_ALLOWED_ORIGINS=https://your-app.vercel.app
CORS_ALLOWED_ORIGINS=
SECRET_KEY=generate-a-random-secret-key-here

# --- SSL CERTIFICATES (Development) ---
# Local HTTPS certificates generated by mkcert
# Install mkcert: brew install mkcert && mkcert -install
SSL_CERT_PATH=certs/localhost-cert.pem
SSL_KEY_PATH=certs/localhost-key.pem

# --- AUTH (GOOGLE OAUTH) ---
# Get these from Google Cloud Console -> Credentials
# https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret

# --- DATABASE ---
# For Docker Compose setup
DATABASE_URL=postgresql+asyncpg://postgres:postgres@db:5432/vacation_tracker

# --- LLM & AI (GROQ) ---
# Get from https://console.groq.com (Free tier available)
GROQ_API_KEY=gsk_your_api_key_here
GROQ_MODEL=llama-3.3-70b-versatile

# =============================================================================
# EXTERNAL MCP SERVERS
# =============================================================================

# --- AMADEUS MCP SERVER (Hotels) ---
# Get credentials from https://developers.amadeus.com
# Used by: amadeus-mcp server (github.com/soren-olympus/amadeus-mcp)
# Free tier: ~2,000 calls/month
AMADEUS_API_KEY=your_amadeus_api_key
AMADEUS_API_SECRET=your_amadeus_api_secret
MOCK_AMADEUS_API=false

# --- KIWI MCP SERVER (Flights) ---
# No API key required for basic usage via Claude.ai connector
# Optional: Tequila API key for higher limits
# Get from https://tequila.kiwi.com/
KIWI_API_KEY=optional_tequila_key

# =============================================================================
# PHASE 4: FLEXIBLE DATE OPTIMIZER
# =============================================================================

# --- SEARCHAPI (Google Hotels scraping) ---
# Get from https://www.searchapi.io
# Pricing: $40/month for 10,000 searches (Developer plan)
# Used for: Bulk date-range price surveying
SEARCHAPI_KEY=your_searchapi_key

# Optimizer settings
OPTIMIZER_MAX_DATE_RANGE_DAYS=90
OPTIMIZER_RATE_LIMIT_PER_HOUR=2000  # 20% of 10K plan

# =============================================================================
# TEMPORAL (Workflow Orchestration)
# =============================================================================
TEMPORAL_ADDRESS=temporal:7233
TEMPORAL_NAMESPACE=default
TEMPORAL_TASK_QUEUE=vacation-tracker-tasks

# =============================================================================
# NOTIFICATIONS
# =============================================================================

# --- EMAIL (SMTP2GO) ---
# Get credentials from https://www.smtp2go.com
# Free tier: 1,000 emails/month
SMTP_HOST=smtp.smtp2go.com
SMTP_PORT=587
SMTP_USER=your_smtp_username
SMTP_PASS=your_smtp_password
EMAIL_FROM=notifications@yourdomain.com

# --- SMS (Optional - Phase 3/4) ---
# https://www.notificationapi.com/
NOTIFICATION_API_KEY=optional_key_for_sms

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Set to 'false' in dev to disable real SMS sending
ENABLE_SMS_NOTIFICATIONS=false

# Controls whether the flexible date optimizer is visible in the UI
# Set to 'true' only after configuring SEARCHAPI_KEY
ENABLE_BETA_OPTIMIZER=false

# Max number of trips a user can track
MAX_TRIPS_PER_USER=10

# Rate limiting: max requests per minute per user (or IP if unauthenticated)
RATE_LIMIT_PER_MINUTE=100

# Refresh frequency (for rate limit management)
# Options: daily, every_3_days, weekly
DEFAULT_REFRESH_FREQUENCY=daily

# =============================================================================
# CACHING (Rate Limit Management)
# =============================================================================

# Redis URL for caching API responses
REDIS_URL=redis://redis:6379/0

# Cache TTL for hotel/flight searches (seconds)
# 24 hours = 86400
CACHE_TTL_SECONDS=86400

# =============================================================================
# OBSERVABILITY (Optional)
# =============================================================================

# OpenTelemetry endpoint for distributed tracing
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
LOG_LEVEL=INFO
